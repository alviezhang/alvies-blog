{"componentChunkName":"component---src-templates-blog-post-js","path":"/archives/2015-07-27-vim-add-line-number/","result":{"data":{"site":{"siteMetadata":{"title":"Alvie's Blog"}},"markdownRemark":{"id":"c98ca8c6-b55b-5951-add4-b74469ea71cb","excerpt":"面试时被问到如何用 Vim 给文件增加行号，没答出来。其中需要用到 Vim 的函数 ： 用每行的行号去替换行首的空字符串，即可获得结果。解决问题的关键在于使用  可以获得之后函数的结果进行替换。 上面的命令会在每行添加对应行号数字，但是行号一般还包含至少一个空格，改进如下： 添加前： 添加后： Ref: http…","html":"<p>面试时被问到如何用 Vim 给文件增加行号，没答出来。其中需要用到 Vim 的函数 <code class=\"language-text\">line</code>：</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token operator\">%</span>s<span class=\"token operator\">/</span>^<span class=\"token operator\">/</span>\\<span class=\"token operator\">=</span><span class=\"token function\">line</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span></code></pre></div>\n<p>用每行的行号去替换行首的空字符串，即可获得结果。解决问题的关键在于使用 <code class=\"language-text\">\\=</code> 可以获得之后函数的结果进行替换。</p>\n<p>上面的命令会在每行添加对应行号数字，但是行号一般还包含至少一个空格，改进如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token operator\">%</span>s<span class=\"token operator\">/</span>^<span class=\"token operator\">/</span>\\<span class=\"token operator\">=</span><span class=\"token function\">line</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string\">' '</span><span class=\"token operator\">/</span></code></pre></div>\n<p>添加前：</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span> <span class=\"token string\">'hello world'</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    foo<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>添加后：</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token number\">1</span> <span class=\"token keyword\">def</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token number\">2</span>     <span class=\"token keyword\">print</span> <span class=\"token string\">'hello world'</span>\n<span class=\"token number\">3</span> \n<span class=\"token number\">4</span> <span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n<span class=\"token number\">5</span>     foo<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<p>Ref:</p>\n<p><a href=\"http://vim.wikia.com/wiki/Insert_line_numbers\">http://vim.wikia.com/wiki/Insert_line_numbers</a></p>","frontmatter":{"title":"用VIM给文件添加行号","date":"July 27, 2015","description":null}},"previous":{"fields":{"slug":"/archives/2015-06-28-openwrt-mount-usb-exroot/"},"frontmatter":{"title":"OpenWrt 挂载 USB 存储设置 exroot"}},"next":{"fields":{"slug":"/archives/2015-08-27-lnmp-configuration/"},"frontmatter":{"title":"Nginx、PHP 开发环境配置"}}},"pageContext":{"id":"c98ca8c6-b55b-5951-add4-b74469ea71cb","previousPostId":"67779b1f-e76f-561b-a260-69ffca77027f","nextPostId":"4adc0f9e-9ed3-5af1-bdc4-245f18278480"}},"staticQueryHashes":["2841359383","3257411868"]}